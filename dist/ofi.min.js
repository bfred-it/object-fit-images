/*! npm.im/object-fit-images 3.2.3 */
var objectFitImages=function(){"use strict";function t(t,e){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+t+"' height='"+e+"'%3E%3C/svg%3E"}function e(t){if(t.srcset&&!d&&window.picturefill){var e=window.picturefill._;t[e.ns]&&t[e.ns].evaled||e.fillImg(t,{reselect:!0}),t[e.ns].curSrc||(t[e.ns].supported=!1,e.fillImg(t,{reselect:!0})),t.currentSrc=t[e.ns].curSrc||t.src}}function i(t){for(var e,i=getComputedStyle(t).fontFamily,n={};null!==(e=l.exec(i));)n[e[1]]=e[2];return n}function n(e,i,n){var o=t(i||1,n||0);m.call(e,"src")!==o&&p.call(e,"src",o)}function o(t,e){t.naturalWidth?e(t):setTimeout(o,100,t,e)}function r(t,r){var s,l=t[a];if(s=r["object-fit"]||r["object-position"]?r:i(t),s["object-fit"]=s["object-fit"]||"fill",!l.img){if("fill"===s["object-fit"])return;if(!l.skipTest&&g&&!s["object-position"])return}if(!l.img){l.img=new Image(t.width,t.height),l.img.srcset=m.call(t,"data-ofi-srcset")||t.srcset,l.img.src=m.call(t,"data-ofi-src")||t.src,p.call(t,"data-ofi-src",t.src),t.srcset&&p.call(t,"data-ofi-srcset",t.srcset),n(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{c(t)}catch(t){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}e(l.img),t.style.backgroundImage='url("'+(l.img.currentSrc||l.img.src).replace(/"/g,'\\"')+'")',t.style.backgroundPosition=s["object-position"]||"center",t.style.backgroundRepeat="no-repeat",t.style.backgroundOrigin="content-box",/scale-down/.test(s["object-fit"])?o(l.img,function(){l.img.naturalWidth>t.width||l.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=s["object-fit"].replace("none","auto").replace("fill","100% 100%"),o(l.img,function(e){n(t,e.naturalWidth,e.naturalHeight)})}function c(t){var e={get:function(e){return t[a].img[e||"src"]},set:function(e,i){return t[a].img[i||"src"]=e,p.call(t,"data-ofi-"+i,e),r(t),e}};Object.defineProperty(t,"src",e),Object.defineProperty(t,"currentSrc",{get:function(){return e.get("currentSrc")}}),Object.defineProperty(t,"srcset",{get:function(){return e.get("srcset")},set:function(t){return e.set(t,"srcset")}})}function s(t,e){var i=!j&&!t;if(e=e||{},t=t||"img",f&&!e.skipTest||!b)return!1;var n={},o=["fill","contain","cover","none","scale-down"];e.objectFit&&-1!==o.indexOf(e.objectFit)&&(n["object-fit"]=e.objectFit),e.objectPosition&&(n["object-position"]=e.objectPosition),"img"===t?t=document.getElementsByTagName("img"):"string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(var c=0;c<t.length;c++)t[c][a]=t[c][a]||{skipTest:e.skipTest,objectFit:e.objectFit,objectPosition:e.objectPosition},r(t[c],n);i&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&s(t.target,{skipTest:e.skipTest,objectFit:e.objectFit,objectPosition:e.objectPosition})},!0),j=!0,t="img"),e.watchMQ&&window.addEventListener("resize",s.bind(null,t,{skipTest:e.skipTest,objectFit:e.objectFit,objectPosition:e.objectPosition}))}var a="bfred-it:object-fit-images",l=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,u="undefined"==typeof Image?{style:{"object-position":1}}:new Image,g="object-fit"in u.style,f="object-position"in u.style,b="background-size"in u.style,d="string"==typeof u.currentSrc,m=u.getAttribute,p=u.setAttribute,j=!1;return s.supportsObjectFit=g,s.supportsObjectPosition=f,function(){function t(t,e){return t[a]&&t[a].img&&("src"===e||"srcset"===e)?t[a].img:t}f||(HTMLImageElement.prototype.getAttribute=function(e){return m.call(t(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,i){return p.call(t(this,e),e,String(i))})}(),s}();
